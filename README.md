# **🏡 Local Mingle - FE**
![로컬밍글 브로셔](https://github.com/LocalMingle/LocalMingle-FE/assets/93027502/4a4fd6d4-cded-4ef3-af10-0f84fa26785e)

> 로컬밍글은 소셜 커뮤니티 서비스입니다.</br>
쉽고 빠르게 함께 할 수 있는 활동을 만들고 참여해보세요!!

</br>

<table width="80%;">
  <tr align="center">
    <td><strong>구분</strong></td>
    <td><strong>링크</strong></td>
    <td><strong>구분</strong></td>
    <td><strong>링크</strong></td>
  </tr>
  <tr align="center">
    <td><img src="https://github.com/LocalMingle/LocalMingle-FE/assets/93027502/a662c8fb-5b51-4a81-b344-21eb205021f7" alt="로컬밍글 아이콘" style="width: 25px;"></td>
    <td><a target="_blank" rel="noopener noreferrer nofollow" href="https://localmingle.store/">Local Mingle</a></td>
    <td><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e9/Notion-logo.svg/1024px-Notion-logo.svg.png" alt="노션 아이콘" style="width: 20px;"></td>
<td><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.notion.so/totobon6125/Local-Mingle-0ceb08bc63674e28a3ee8d458ba2baaf">브로슈어</a></td>
  </tr>
  <tr align="center">
    <td><img src="https://user-images.githubusercontent.com/389021/165723723-c93929a5-01d9-49e1-907b-43669d8089e6.png" alt="리액트 아이콘" style="width: 25px;"></td>
    <td><a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/LocalMingle/LocalMingle-FE">FE Github</a></td>
    <td><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/e/e9/Notion-logo.svg/1024px-Notion-logo.svg.png" alt="노션 아이콘" style="width: 20px;"></td>
    <td><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.notion.so/totobon6125/6-Local-Mingle-2f816b5d6b494b69ad27e113e1a48a9f">팀 SA</a></td>
  </tr>
  <tr align="center">
    <td><img src="https://static-00.iconduck.com/assets.00/node-js-icon-454x512-nztofx17.png" alt="노드js 아이콘" style="width: 20px;"></td>
    <td><a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/LocalMingle/LocalMingle-BE">BE Github</a></td>
    <td><img src="https://cdn-icons-png.flaticon.com/512/5968/5968705.png" alt="피그마 아이콘" style="width: 20px;"></td>
    <td><a target="_blank" rel="noopener noreferrer nofollow" href="https://www.figma.com/file/Dq3pVmdUxnjMHvXaMZOUr8/%ED%95%AD%ED%95%B499-%EC%9E%91%EC%97%85?type=design&node-id=0-1&mode=design&t=LUqRgNyDtMIs1wkf-0">Figma</a></td>
  </tr>
</table>

</br>

## **🎈 주요기능 소개**

<table>
  <tr align="center">
    <td><strong>소셜 로그인</strong></td>
    <td><strong>다국어</strong></td>
    <td><strong>채팅방</strong></td>
  </tr>
   <tr align="center">
    <td><img src="https://github.com/LocalMingle/LocalMingle-FE/assets/138233242/e7925ad3-c01b-4a92-b55c-85af5c0ee943" alt="소셜 로그인" style="height:500px"/></td>
    <td><img src="https://github.com/LocalMingle/LocalMingle-FE/assets/138233242/5e4219ef-f591-424f-8c9d-3a71566f4510" alt="다국어" style="height:500px"/></td>
    <td><img src="https://github.com/LocalMingle/LocalMingle-FE/assets/138233242/f9855b2f-5e4e-468b-a14b-56136a1e7a08" alt="채팅방" style="height:500px"/></td>
  </tr>
</table>

</br>

<table>
  <tr align="center">
    <td><strong>게시글 검색</strong></td>
    <td><strong>게시글 필터링</strong></td>
    <td><strong>인피니티 스크롤</strong></td>
  </tr>
   <tr align="center">
    <td><img src="https://github.com/LocalMingle/LocalMingle-FE/assets/138233242/e8eb91f1-340d-4b19-a32c-4cce8ff83fee" alt="게시글 검색" style="height:500px"/></td>
    <td><img src="https://github.com/LocalMingle/LocalMingle-FE/assets/138233242/92aa2dc2-0865-4b98-9a7c-fdd70af87bb1" alt="게시글 필터링" style="height:500px"/></td>
    <td><img src="https://github.com/LocalMingle/LocalMingle-FE/assets/138233242/66e20e95-5784-4d25-9a4a-3766a227d907" alt="인피니티 스크롤" style="height:500px"/></td>
  </tr>
</table>

</br>

## **👩🏻‍💻👨🏻‍💻 FrontEnd 개발**

|김태현|(VL) 장소영|
|:---:|:---:|
|<img src="https://avatars.githubusercontent.com/u/138233242?v=4" width="200" height="200"/>|<img src="https://avatars.githubusercontent.com/u/93027502?v=4" width="200" height="200"/>|
|[ted0729](https://github.com/ted0729)|[ddoddiworld](https://github.com/ddoddiworld?tab=repositories)|

</br>

## **💻 역할 담당**
<table>
  <tr>
    <td align="center">김태현</td>
    <td style="padding: 15px 10px;">
      - 일반회원가입 / 로그인페이지<br />
      - 소셜 로그인<br />
      - 다국어기능<br />
      - 실시간 채팅<br />
      - 게시글 상세 페이지<br />
      - 마이페이지(회원정보 수정, 작성 이벤트 관리, 참여 이벤트 관리, 회원탈퇴) CRUD<br />
    </td>
    <td align="center">tutu72933@gmail.com</td>
  </tr>
    <tr>
    <td align="center">장소영</td>
    <td style="padding: 15px 10px;">
      - 메인페이지(카드뷰, 게시글 검색, 게시글 샐랙터 필터링, 인피니티 스크롤)<br />
      - 게시글 작성 / 수정 페이지<br />
      - 1차 개발 범위에 대한 전체화면 퍼블리싱<br />
      - gitHub 관리<br />
      - Figma 관리
    </td>
    <td align="center">emily_jang@kakao.com</td>
  </tr>
</table>

</br>

## **🗂️ 서비스 아키텍처**

<img src="https://github.com/LocalMingle/LocalMingle-FE/assets/93027502/b1dab7b7-d0cd-46bc-9736-925d67494595" alt="서비스아키텍처" style="width:850"/>

</br>

## **⛳️ FE 기술 선정**

<div align="center">
  <img src="https://img.shields.io/badge/react-61DAFB?style=for-the-badge&logo=react&logoColor=white">
  <img src="https://img.shields.io/badge/typescript-3178C6?style=for-the-badge&logo=typescript&logoColor=efefee"/>
</div>
<div align="center">
  <img src="https://img.shields.io/badge/Axios-5A29E4?style=for-the-badge&logo=Axios&logoColor=white">
  <img src="https://img.shields.io/badge/react--query-FF4154?style=for-the-badge&logo=reactquery&logoColor=white">
  <img src="https://img.shields.io/badge/recoil-3578E5?style=for-the-badge&logo=recoil&logoColor=efefee"/>
  <img src="https://img.shields.io/badge/reactrouter-CA4245?style=for-the-badge&logo=reactrouter&logoColor=efefee"/>
</div>
<div align="center">
 <img src="https://img.shields.io/badge/styledcomponents-DB7093?style=for-the-badge&logo=styledcomponents&logoColor=efefee"/>
</div>
<div align="center">
  <img src="https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white">
</div>

</br>

## **🌟 기술적 의사결정**

<table>
  <tr>
    <td><strong>Vite React</strong></td>
    <td>
      CRA와 비교하자면 Vite는 기본적으로 ESM(EcmaScript Modules)을 사용하며,</br>
      더 효율적인 모듈 번들링 제공하기 때문에 빌드 시간이 매우 빠라서 생산성이 올라갑니다.</br>
      또한 타입스크립트를 지원하기 때문에 채택했습니다.
    </td>
  </tr>
  <tr>
    <td><strong>TypeScript</strong></td>
    <td>
      타입스크립트는 정적 타이핑을 지원하며, 코드 작성 시 변수의 타입을 명시적으로 지정할 수 있습니다.</br>
      이는 컴파일러가 코드를 분석하여 타입 에러를 사전에 찾아내고 예방할 수 있게 해 주기 때문에 코드의 일관성을 유지할 수 있다는 장점 때문에 채택했습니다.
    </td>
  </tr>
  <tr>
    <td><strong>Axios</strong></td>
    <td>
      직관적인 API를 제공하여 HTTP 요청을 손쉽게 처리할 수 있습니다.</br>
      또한 요청과 응답을 가로채는 인터셉터(interceptor)를 제공하여 요청 또는 응답을 수정하거나</br>
      에러를 처리하는 등의 다양한 기능을 제공 받을 수 있으며 사용이 간편하여 채택했습니다.
    </td>
  </tr>
  <tr>
    <td><strong>React Router</strong></td>
    <td>
      React Router는 SPA(Single Page Application)에서 클라이언트 사이드 라우팅을 관리합니다.</br>
      페이지 리로드 없이 URL을 변경하고, 적절한 컴포넌트를 렌더링하여 사용자에게 매끄러운 페이지 전환 경험을 제공하기에 채택했습니다.
    </td>
  </tr>
  <tr>
    <td><strong>React Query</strong></td>
    <td>
      React Query는 서버 상태 관리를 위한 툴로, 데이터 가져오기, 캐싱, 동기화 및 업데이트 과정을 쉽게 관리합니다.</br>
      이를 통해 비동기 로직을 간결하게 작성하고, 애플리케이션의 성능을 향상시킬 수 있기 때문에 채택했습니다.
    </td>
  </tr>
  <tr>
    <td><strong>Recoil</strong></td>
    <td>
      상태 관리를 단순화하고 선언적으로 처리할 수 있게 해주는 효과적인 도구로 타입스크립트를 지원합니다.</br>
      특히 중앙 집중화된 상태관리를 제공하여 전역 상태관리를 일관되게 관리할 수 있다는 장점이 있었고,</br>
      즉, 여러 컴포넌트에서 같은 상태를 쓰거나 수정할 때 편리하여 채택했습니다.
    </td>
  </tr>
  <tr>
    <td><strong>Styled Components</strong></td>
    <td>
      컴포넌트 단위로 정의하므로, 컴포넌트에 대한 스타일이 해당 컴포넌트의 코드와 함께 위치하게 됩니다.</br>
      또한 상태에 따라 스타일을 동적으로 변경하거나, 조건부로 스타일을 적용할 때 효과적이기 때문에 채택했습니다.
    </td>
  </tr>
  <tr>
  <tr>
    <td><strong>Socket.io</strong></td>
    <td>
      웹 소켓(WebSocket)기반으로 동작하는 JS 라이브러리로, 채팅 기능 구현을 위해 사용했습니다.</br>
      양방향 통신을 가능하게 해 주기 때문에 서버와 클라이언트간에 데이터를 실시간으로 주고받을 수 있습니다.
    </td>
  </tr>
  <tr>
    <td><strong>Intersection observer</strong></td>
    <td>
      인피니티 스크롤 구현을 위해 사용했습니다.</br>
      스크롤 이벤트를 사용하면 매 스크롤마다 이벤트 핸들러가 호출되어 성능에 부담이 될 수 있는데,</br>
      이 API를 사용하면 비동기적으로 작동하며, 뷰포트와 대상 요소 간의 교차 여부를 비동기적으로 감지합니다.</br>
      스크롤 위치와 상관 없이 요소가 화면에 나타나거나 사라질 때 이를 감지할 수 있어 웹 페이지의 부하를 감소시킬 수 있습니다.
    </td>
  </tr>
    <tr>
    <td><strong>i18nex</strong></td>
    <td>
      다국어 지원을 위한 인터내셔널라이제이션(i18n) 라이브러리로 다국어 기능 구현을 위해 사용 했습니다.</br>
      유연한 플로그인 시스템을 갖고 있으며 다양한 플랫폼과 프레임워크에서 사용 가능합니다.</br>
    </td>
  </tr>
  <tr>
    <td><strong>Toastify</strong></td>
    <td>
      alert 대신 사용자에게 좀 더 부드럽고 친화적으로 안내를 하기 위해 사용했습니다.</br>
      개발자가 쉽게 토스트 메시지를 표시하고 제어할 수 있도록 도와주며, 간편하게 토스트를 구현할 수 있습니다.
    </td>
  </tr>
</table>

</br>

## **🛠️ 트러블슈팅**

<details>
<summary>시/도 옵션 선택시 구/군의 옵션이 바로 보이지 않고 몇초 뒤에 변경됨 [소영]</summary>
- 문제의 디테일
  <br>
시/도 샐랙터의 옵션을 변경하면 바로 구/군이 변경되어야 하는데 바로 변경되지 않고 몇초 뒤에 변경되는 이슈가 있었습니다.
  <br>
  <img src="https://github.com/LocalMingle/LocalMingle-FE/assets/138233242/b9fdbe93-ba6b-4435-99d9-d2b963a94367" width="250" height="400">
  <br>
- 해결을 위한 노력
  <br>
우선 시/도 옵션을 변경하면 그 값이 잘 전달되고 있다는 것을 확인 한 뒤,
useQuery 훅을 사용했는데 완전히 알지 못하는 기능들이 있는지 점검을 하게 되었습니다.
  <br>
- 해결 방법
  <br>
useQuery에는 data, isLoading, error 외로 refetch라는 것도 있는데 refetch는 데이터를 갱신하고 다시 가져오는데 사용됩니다.
주로 사용자 행동에 응답하여 데이터를 갱신할 때 사용되는데 이를 이용해서 데이터를 새로고침 후 최신 정보를 표현하기 위해 refetch와 useEffect를 이용해서 해결하였습니다.
  <br>
  <img src="https://github.com/LocalMingle/LocalMingle-FE/assets/138233242/180903b1-c817-4ad2-ad88-2693089093e5" width="500" height="80">
</details>

<details>
<summary>토큰값 로컬스토리지 저장 오류 [태현]</summary>
- 문제의 디테일
  <br>
로컬스토리지에 저장된 토큰값을 받아오지 못했습니다. 스토리지에 저장은 되어있는데 get이 되지않았습니다.
  <br>
- 해결을 위한 노력
  <br>
오타를 찾고, 로컬스토리지에는 문자열만 저장되는게 맞는것인지 의심했습니다.
  <br>
- 해결 방법
  <br>
토큰을 객체라고 생각해서 JSON.stringify을 사용하여 문자열로 바꿔서 로컬스토리지에 저장하려고 했습니다. 그렇게 저장하니 로컬스토리지에 “”가 붙어서, 불러오지를 못했습니다. “”가 너무 당연한것처럼 붙어있어서 알아차리는데 힘들었습니다. 
토큰들은 대체로 자체적으로 문자열이라는걸 알게됬고, 결정적으로 스토리지속의 토큰이 “” 안에있다는걸 알게되서 JSON.stringify을 없애고 해결됬습니다. JSON.stringify는 객체나 배열을 저장할때만 쓰인다는걸 알았습니다.
</details>

<details>
<summary>다국어 기능을 통한 언어변경시 리다이렉트 되면서 불필요한 api의 호출반복 [태현]</summary>
- 문제의 디테일
  <br>
다국어버튼을 통해서 언어가 변경되는걸 전역에 적용되도록 설정했는데, 변경버튼 클릭시마다 api를 불필요하게 매번 불러오는 현상 이었습니다.
  <br>
- 해결을 위한 노력
  <br>
api호출을 최소화 하기위한 방법을 구상했고, 캐시유지를 해야겠다고 생각하고 로직을 구현하려고 했습니다.
  <br>
- 해결 방법
  <br>
API 호출 최소화: staleTime이 Infinity로 설정되면, 데이터가 절대로 'stale'(오래된 데이터)로 간주되지 않아서, 언어가 변경될 때마다 같은 API를 다시 호출하는 일이 없게 됩니다. 즉, 같은 데이터를 여러 번 불러오는 것을 피할 수 있었습니다.
  <br>
캐시 유지: cacheTime을 Infinity로 설정하면, API로부터 받아온 데이터가 캐시에서 지워지지 않습니다. 이렇게 하면 사용자가 다시 같은 페이지나 데이터를 요청할 때 빠르게 응답할 수 있습니다.
</details>

<details>
<summary>백엔드에게 Params로 값을 받을 때 받는 방법에 따른 모바일 소셜로그인 오류생성 [태현]</summary>
- 문제의 디테일
  <br>
백엔드에서 소셜로그인시 Params값으로 토큰을 넘겨줘서, 그에 맞게 get을 하고 if문을 통해서
받고있었는데,
  <br>
  모바일마다 기종이나 안드로이드 iOS에 상관없이 로그인이 되는유저와 안되는 유저가 있었습니다.
  <br>
  로그인이 되는 유저는 토큰값이 잘 받아졌는데 로그인이 되지않는 유저들은 받아지지 않았습니다.
  <br>
- 해결을 위한 노력
  <br>
모바일과 pc을 연결해서 모바일 디버깅을 통해서 계속 해서 console값을 찍어보며 로그인이 되는 모바일과 안되는모바일을 비교해 가며 문제를 찾아봤습니다.
  <br>
- 해결 방법
  <br>
백엔드에서 소셜로그인시 Params값으로 토큰을 넘겨줘서, 그에 맞게 get을 하고 if문을 통해서
urlParams.Size ! == null 인경우을 넣었었는데, 당연히 그냥 Params에 값이 없을 경우에 실행되지않도록 넣었던 조건문이었습니다.
  <br>
알고보니 https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams/size 해당 사이트에서 확인해본 결과,
  <br>
size를 조건에 넣으려면 각 모바일의 브라우저 버전이 가장 최신형이어야만 조건문이 통할 수 있었던것입니다.
  <br>
그래서 브라우저 업데이트가 되지않은 모바일은 로그인이 되지않았던 것이었습니다.
결과적으로 최신화 되어있지않은 모바일 브라우저 환경에서는 urlParams.Size를 지원하지 않는데 사용하려 해서 발생한 문제로 크로스 브라우징을 위해 해당 변수 없이도 원하는 조건 필터링을 할 수 있어서 제거했습니다.
  <br>
  <img width="600" alt="스크린샷 2023-11-13 오후 11 02 21 복사본" src="https://github.com/LocalMingle/LocalMingle-FE/assets/138233242/b57d9e2c-38f1-4bcb-8455-064c6dfc8877">
  <br>
  <img width="524" alt="스크린샷 2023-11-16 오후 8 01 02" src="https://github.com/LocalMingle/LocalMingle-FE/assets/138233242/6b78f3df-cff7-4e1b-af18-bc1868e6f68d">
</details>

<details>
<summary>게시글 필터링, 검색 안되는 이슈 [소영]</summary>
- 문제의 디테일
  <br>
카드에 들어가는 API 조회 시 event, guestList, hostUser에 대한 정보들이 있고
아래 데이터 값들이 카드에 사용되고 있습니다. (아래 콘솔 내용 사진 참조)
  <br>
  <img src="https://github.com/LocalMingle/LocalMingle-FE/assets/138233242/ed63a4eb-6281-4d05-a432-b3a664762ad9" width="700" height="600">
  <br>
하지만 필터링관련 API들은 event에 대한 정보들만 있기 때문에
카드에 들어가야할 나머지 값들을 확인할 수 있는 방법이 없습니다. (아래 스웨거 사진 참조)
  <br>
  <img src="https://github.com/LocalMingle/LocalMingle-FE/assets/138233242/80dd90e2-b25a-4c33-827c-6e16b535701f" width="500" height="600">
  <br>
event를 제외한 나머지 데이터 값이 없으므로 카드에 필요한 데이터 값을 찾을 수 없어
필터링을 할 때마다 빈 페이지 상태로 에러가 발생합니다.
  <br>
- 해결을 위한 노력
  <br>
백엔드측에서 적극적으로 필터에 대한 api 레이아웃을  맞춤 작업 해 주셔서 해결 완료 했습니다.
하지만 분리된 api에서는 개별적으로 컨트롤만 가능하지 &&조건으로는 연속적인 필터링은 불가능했습니다.
  <br>
- 해결 방법
  <br>
api를 하나로 통일하면서 && 조건도 같이 탈 수 있도록 로직 변경이 필요합니다.
</details>

</br>

## **🗣️ 유지 피드백 & 반영**
마지막으로 유저 피드백 입니다.<br/>
프로젝트에서 좋게 평가해주신 부분은 디자인과 성능이 부분이며<br/>
불편하게 느끼신 상당 부분은 유저 편의성이 좋지 않다는 것 이였습니다.<br/>
그래서 짧게 남은 프로젝트 기간 동안 피드백을 최대한 반영할 수 있는 부분이 유저 편의성 부분이라고 판단하여,<br/>
이 부분을 중점으로 피드백을 반영 하였습니다.<br/>
<table>
  <tr>
    <th align="center">Before</td>
    <th align="center">After</td>
  </tr>
  <tr>
    <td align="center">
      <img width="400" height="300" alt="작성자 참여 비포" src="https://github.com/LocalMingle/LocalMingle-FE/assets/138233242/51ed028a-fe1c-4705-9c71-df4b0d142a3b">
    </td>
    <td align="center">
      <img width="400" height="300" alt="작성자 참여 애프터" src="https://github.com/LocalMingle/LocalMingle-FE/assets/138233242/712da9f9-7536-409e-aab8-e96520f20e95">
    </td>
  </tr>
  <tr>
    <td>
      참여자 리스트에 작성자 본인도 포함되었으면 좋겠다는 의견
    </td>
    <td>
      기존에는 작성자가 게시글 생성시 참여자리스트에<br/>
      포함되지 않았지만 피드백 이후 포함 되도록 수정
    </td>
  </tr>
</table>

<table>
  <tr>
    <th align="center">Before</td>
    <th align="center">After</td>
  </tr>
  <tr>
    <td align="center">
      <img width="400" height="200" alt="헤더변경 비포" src="https://github.com/LocalMingle/LocalMingle-FE/assets/138233242/0b6766fe-1281-4682-9b24-3d7e6ae1c57f">
    </td>
    <td align="center">
      <img width="400" height="200" alt="해더변경 애프터" src="https://github.com/LocalMingle/LocalMingle-FE/assets/138233242/8000ae7c-fef0-4b86-8871-2545b38d3580">
    </td>
  </tr>
  <tr>
    <td>
      헤더에 텍스트로 이루어진 부분 때문에 화면이<br/>
      다소 정신없고 꽉 차보인다는 의견
    </td>
    <td>
      아이콘으로 대체하여 드롭다운으로 피드백을 반영
    </td>
  </tr>
</table>

<table>
  <tr>
    <th align="center">Before</td>
    <th align="center">After</td>
  </tr>
  <tr>
    <td align="center">
      <img width="400" height="700" alt="placeholder before" src="https://github.com/LocalMingle/LocalMingle-FE/assets/138233242/f9e542f6-2c3a-4f13-ae4c-4946e5dcc30c">
    </td>
    <td align="center">
      <img width="400" height="700" alt="placeholder after" src="https://github.com/LocalMingle/LocalMingle-FE/assets/138233242/b90b78f2-a0a2-4857-9dff-842f7c5c746f">
    </td>
  </tr>
  <tr>
    <td>
      게시글 작성 시 제목과 본문에 대해 몇 글자까지<br/>
      작성할 수 있는지 알려주면 좋겠다는 의견
    </td>
    <td>
      Placeholder를 활용하여 글자 제한 안내 문구 추가
    </td>
  </tr>
</table>

</br>


